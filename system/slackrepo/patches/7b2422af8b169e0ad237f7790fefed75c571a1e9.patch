From 7b2422af8b169e0ad237f7790fefed75c571a1e9 Mon Sep 17 00:00:00 2001
From: Andrew Clemons <andrew.clemons@gmail.com>
Date: Tue, 19 Sep 2017 08:13:19 +1200
Subject: [PATCH] Detect overlayfs support for gzipped kernel modules

slackwarearm uses gzipped kernel modules.
---
 slackrepo | 1 +
 1 file changed, 1 insertion(+)

diff --git a/slackrepo b/slackrepo
index ab2b114..628597a 100755
--- a/slackrepo
+++ b/slackrepo
@@ -299,6 +299,7 @@ SYS_OVERLAYFS='n'
 if \
   [ -d /sys/module/overlay ] || \
   [ -f /lib/modules/"$(uname -r)"/kernel/fs/overlayfs/overlay.ko ] || \
+  [ -f /lib/modules/"$(uname -r)"/kernel/fs/overlayfs/overlay.ko.gz ] || \
   grep -q overlay /proc/filesystems
 then
   SYS_OVERLAYFS='y'
